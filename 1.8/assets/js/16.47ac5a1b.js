(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{376:function(t,e,s){t.exports=s.p+"assets/img/image8.c7b330eb.png"},397:function(t,e,s){"use strict";s.r(e);var n=s(45),a=Object(n.a)({},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"deploying-operating-system-on-bare-metal-nodes"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#deploying-operating-system-on-bare-metal-nodes"}},[t._v("#")]),t._v(" Deploying operating system on bare-metal nodes")]),t._v(" "),n("p",[n("img",{attrs:{src:s(376),alt:""}})]),t._v(" "),n("div",{staticClass:"custom-block warning"},[n("p",{staticClass:"custom-block-title"},[t._v("Pre-requisites")]),t._v(" "),n("p",[t._v("Centos 7 or RHEL "),n("a",{attrs:{href:"#installer-machine"}},[t._v("Installer machine")]),t._v(" with the\nfollowing configurations is essential to initiate the OS deployment\nprocess.")]),t._v(" "),n("ol",[n("li",[n("p",[t._v('At least 200 GB disk space (especially in the "/" partition), 4\nCPU cores and 8GB RAM.')])]),t._v(" "),n("li",[n("p",[t._v("1 network interface with static IP address configured on same\nnetwork as the management plane of the bare-metal servers and has access\nto internet.")])]),t._v(" "),n("li",[n("p",[t._v("Python 3.6 or above is present and latest version associated pip is\npresent.")])]),t._v(" "),n("li",[n("p",[t._v("Ansible 2.9 should be installed")])]),t._v(" "),n("li",[n("p",[t._v("OS ISO image is present in the HTTP file path within the installer\nmachine.")])]),t._v(" "),n("li",[n("p",[t._v("Ensure that SELinux status is disabled.")])])])]),t._v(" "),n("h3",{attrs:{id:"anthos-hosts"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#anthos-hosts"}},[t._v("#")]),t._v(" Anthos hosts")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("2 network interfaces for the production network")])]),t._v(" "),n("li",[n("p",[t._v("1 local drive to be used as the boot device")])]),t._v(" "),n("li",[n("p",[t._v("Boot mode is set to UEFI")])]),t._v(" "),n("li",[n("p",[t._v("Boot order - Hard disk")])]),t._v(" "),n("li",[n("p",[t._v("Secure Boot - disabled")])])]),t._v(" "),n("h3",{attrs:{id:"installation"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#installation"}},[t._v("#")]),t._v(" Installation")]),t._v(" "),n("ol",[n("li",[n("p",[t._v('Enable Python3 and Ansible Environment as mentioned in "Installer\nmachine" section of deployment guide.')])]),t._v(" "),n("li",[n("p",[t._v("Setup the installer machine.")])])]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("# sh setup.sh\n")])])]),n("p",[t._v('Enter the installer machine OS. ("rhel7" for RHEL OS and "centos7"\nfor Centos OS)')]),t._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),n("p",[t._v("Run the below command to fix any unwanted space, tabs error.")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("# sed -i \\'s/\\\\r\\$//\\' \\<path\\>/setup.sh\n")])])])]),t._v(" "),n("ol",{attrs:{start:"3"}},[n("li",[t._v("This script contains 1 input file input.json, both of which needs to\nbe updated with values for all the variables present within them.")])]),t._v(" "),n("p",[t._v("a. Edit input.json file with the following command and add the details\nof web server and operating system to be installed.")]),t._v(" "),n("p",[t._v('Default password for Ansible Vault file "config.json" is\n'),n("strong",[t._v("changeme")]),t._v(".")]),t._v(" "),n("p",[t._v("Command to edit config.json")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("# ansible-vault edit input.json\n")])])]),n("p",[t._v("Example values for the input configuration is as follows")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('{\n\n"HTTP_server_base_url" : "http://10.0.x.x/",\n\n"HTTP_file_path" : "/usr/share/nginx/html/",\n\n"OS_type" : "srhel8",\n\n"OS_image_name" : "\\<os_iso_image_name_with_extension\\>"\n\n}\n\n{\n\n"Server_serial_number" : "MXxxxxxDP",\n\n"ILO_Address" : "10.0.x.x",\n\n"ILO_Username" : "username",\n\n"ILO_Password" : "password",\n\n"Hostname" : "hostname01.twentynet.local",\n\n"Bonding_Interface1" : "eth*",\n\n"Bonding_Interface2" : "eth*",\n\n"Host_IP" : "20.x.x.x",\n\n"Host_Username" : "root",\n\n"Host_Password" : "Password",\n\n"Host_Netmask" : "255.x.x.x",\n\n"Host_Gateway" : "20.x.x.x",\n\n"Host_DNS" : "20.x.x.x",\n\n"Host_Search" : "twentynet.local",\n\n"GPU_Host" : "yes"\n\n},\n\n{\n\n"Server_serial_number" : "MXxxxxxDQ",\n\n"ILO_Address" : "10.0.x.x",\n\n"ILO_Username" : "username",\n\n"ILO_Password" : "password",\n\n"Hostname" : "hostname02.twentynet.local",\n\n"Bonding_Interface1" : "eth*",\n\n"Bonding_Interface2" : "eth*",\n\n"Host_IP" : "20.0.x.x",\n\n"Host_Username" : "root",\n\n"Host_Password" : "Password",\n\n"Host_Netmask" : "255.x.x.x",\n\n"Host_Gateway" : "20.x.x.x",\n\n"Host_DNS" : "20.x.x.x",\n\n"Host_Search" : "twentynet.local",\n\n"GPU_Host": "No"\n\n}\n\n')])])]),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),n("ul",[n("li",[n("p",[t._v('Acceptable values for "OS_type" variable is "rhel8", "centos8",\n"ubuntu18", and "ubuntu20')])]),t._v(" "),n("li",[n("p",[t._v('Default password for Ansible Vault files "server_details.json" is\n'),n("strong",[t._v("changeme")]),t._v(".")])])])]),t._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),n("p",[t._v('Acceptable values for "GPU_Host" variable is "yes" for host\nwhich has GPU cards and "No" for hosts which do not have GPU cards.')])]),t._v(" "),n("ol",{attrs:{start:"4"}},[n("li",[t._v("Executing the script to deploy operating system.")])]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("\n ansible-playbook --i hosts deploy_os.yaml --ask-vault-pass\n\n")])])]),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),n("ol",[n("li",[t._v("Generic settings done as part of kickstart file for OS are as\nfollows. It is recommended that the user reviews and modifies the\nkickstart files to suit their requirements.")])]),t._v(" "),n("ul",[n("li",[n("p",[t._v("Minimal Installation")])]),t._v(" "),n("li",[n("p",[t._v("Language - en_US")])]),t._v(" "),n("li",[n("p",[t._v("Keyboard & layout - US")])]),t._v(" "),n("li",[n("p",[t._v("Partition")])]),t._v(" "),n("li",[n("p",[t._v('/boot/efi ,fstype="vfat" ,size=500MiB')])]),t._v(" "),n("li",[n("p",[t._v("root, size = 150G")])]),t._v(" "),n("li",[n("p",[t._v("srv , size = 100G")])]),t._v(" "),n("li",[n("p",[t._v("swap, size = 62.96G")])]),t._v(" "),n("li",[n("p",[t._v("var, size = 200G")])]),t._v(" "),n("li",[n("p",[t._v("home, size = 25G")])])]),t._v(" "),n("p",[t._v("Specified Partitions are inline with Anthos implementation and is\nadvised not to make changes to this.")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("timezone - America/NewYork")])]),t._v(" "),n("li",[n("p",[t._v("NIC teaming is performed with devices as specified in\nBonding_Interface field of input_files/server_details.json input file.\nIt is further assigned with the Host_IP, Netmask, Domain as defined in\nthe input_files/server_details.json input file.")])])])])])}),[],!1,null,null,null);e.default=a.exports}}]);